var J=Object.defineProperty;var Z=(e,t,s)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var u=(e,t,s)=>(Z(e,typeof t!="symbol"?t+"":t,s),s);import{S as M,i as S,s as H,k as y,l as _,m as b,h as g,n as p,b as f,I as E,o as ee,w as te,O as ne,q as K,a as T,e as R,r as j,c as I,E as Q,u as ie,P as F,Q as w,R as L,T as P,U as k,y as $,D as se,z,A,g as N,d as O,B as U}from"../chunks/index.b8f8e0ce.js";const q=500,le=300,V=500,ae=300;class re{constructor(){u(this,"isMoving",!1);u(this,"isLongclick",!1);u(this,"button",0);u(this,"lastX",0);u(this,"lastY",0);u(this,"consecutiveClicks",0);u(this,"lastMouseupTime",0);u(this,"activeElement",null);this.reset()}reset(){this.isMoving=!1,this.isLongclick=!1,this.button=0,this.lastX=0,this.lastY=0,this.consecutiveClicks=0,this.lastMouseupTime=0,this.activeElement=null}}class oe{constructor(){u(this,"isDragging",!1);u(this,"isPinching",!1);u(this,"isLongpressed",!1);u(this,"consecutiveTaps",0);u(this,"lastTouchendTime",0);u(this,"lastCenterX",0);u(this,"lastCenterY",0);u(this,"identifier",0);u(this,"x",0);u(this,"y",0);u(this,"hypotenuse",0);u(this,"activeElement",null);this.reset()}reset(){this.isDragging=!1,this.isPinching=!1,this.isLongpressed=!1,this.consecutiveTaps=0,this.lastTouchendTime=0,this.lastCenterX=0,this.lastCenterY=0,this.identifier=0,this.x=0,this.y=0,this.hypotenuse=0,this.activeElement=null}}let D=[],l=new re,i=new oe;const c=(e,t)=>{e!=null&&e.dispatchEvent(new CustomEvent("gesture",{detail:t,bubbles:!1,cancelable:!1}))},ce=e=>{l.reset(),i.reset(),l.lastMouseupTime=Date.now(),window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",C),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",x)},ue=e=>{if(window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",C),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",x),l.isMoving)if(l.isMoving=!1,l.isLongclick)l.isLongclick=!1,c(l.activeElement,{name:"longclick-drag-end",x:l.lastX,y:l.lastY});else switch(l.button){case 0:c(l.activeElement,{name:"left-click-drag-end",x:l.lastX,y:l.lastY});break;case 1:c(l.activeElement,{name:"middle-click-drag-end",x:l.lastX,y:l.lastY});break;case 2:c(l.activeElement,{name:"right-click-drag-end",x:l.lastX,y:l.lastY});break}l.isLongclick&&c(l.activeElement,{name:"longclick-release",x:l.lastX,y:l.lastY}),l.reset(),i.isDragging&&(i.isDragging=!1,i.isLongpressed?(i.isLongpressed=!1,c(i.activeElement,{name:"longpress-drag-end",x:i.lastCenterX,y:i.lastCenterY})):c(i.activeElement,{name:"touch-drag-end",x:i.lastCenterX,y:i.lastCenterY})),i.isLongpressed&&c(i.activeElement,{name:"longpress-release",x:i.lastCenterX,y:i.lastCenterY}),i.reset()},de=e=>{c(e.target,{name:"wheel",x:e.clientX,y:e.clientY,event:e}),e.preventDefault(),e.stopPropagation()},he=e=>{e.preventDefault(),e.stopPropagation()},me=e=>{document.activeElement!==e.target&&(window.addEventListener("mousemove",Y),window.addEventListener("mouseup",C),l.activeElement=e.target,l.lastX=e.clientX,l.lastY=e.clientY,l.isMoving||(l.button=e.button),l.button===0&&window.setTimeout(()=>{Date.now()-l.lastMouseupTime>=V&&!l.isMoving&&(l.isLongclick=!0,c(l.activeElement,{name:"longclick",x:e.clientX,y:e.clientY}))},V),e.preventDefault(),e.stopPropagation())},Y=e=>{if(e.movementX===0&&e.movementY===0)return;let t=e.clientX-l.lastX,s=e.clientY-l.lastY;if(!l.isMoving)if(l.isLongclick)c(l.activeElement,{name:"longclick-drag-start",x:e.clientX,y:e.clientY});else switch(l.button){case 0:c(l.activeElement,{name:"left-click-drag-start",x:e.clientX,y:e.clientY});break;case 1:c(l.activeElement,{name:"middle-click-drag-start",x:e.clientX,y:e.clientY});break;case 2:c(l.activeElement,{name:"right-click-drag-start",x:e.clientX,y:e.clientY});break}if(l.isMoving=!0,l.lastX=e.clientX,l.lastY=e.clientY,l.isLongclick)c(l.activeElement,{name:"longclick-dragging",x:e.clientX,y:e.clientY,dx:t,dy:s});else switch(l.button){case 0:c(l.activeElement,{name:"left-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:s});break;case 1:c(l.activeElement,{name:"middle-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:s});break;case 2:c(l.activeElement,{name:"right-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:s});break}},C=e=>{if(window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",C),l.lastMouseupTime=Date.now(),l.isMoving)if(l.isMoving=!1,l.isLongclick)l.isLongclick=!1,c(l.activeElement,{name:"longclick-drag-end",x:l.lastX,y:l.lastY});else switch(l.button){case 0:c(l.activeElement,{name:"left-click-drag-end",x:l.lastX,y:l.lastY});break;case 1:c(l.activeElement,{name:"middle-click-drag-end",x:l.lastX,y:l.lastY});break;case 2:c(l.activeElement,{name:"right-click-drag-end",x:l.lastX,y:l.lastY});break}else l.isLongclick||(e.button===2?c(l.activeElement,{name:"right-click",x:e.clientX,y:e.clientY}):e.button===1?c(l.activeElement,{name:"middle-click",x:e.clientX,y:e.clientY}):(l.consecutiveClicks===0&&c(l.activeElement,{name:"left-click",x:e.clientX,y:e.clientY}),l.consecutiveClicks++,window.setTimeout(()=>{l.consecutiveClicks>1&&c(l.activeElement,{name:"double-click",x:e.clientX,y:e.clientY}),l.consecutiveClicks=0},ae)));l.isLongclick&&c(l.activeElement,{name:"longclick-release",x:e.clientX,y:e.clientY}),l.isLongclick=!1},ge=e=>{if(e.touches.length>1&&(e.preventDefault(),e.stopPropagation()),document.activeElement!==e.target){if(e.preventDefault(),e.stopPropagation(),e.touches.length>1){if(e.touches[0].identifier===i.identifier)return;i.isPinching=!0}window.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("touchend",x),window.addEventListener("touchcancel",x),i.identifier=e.touches[0].identifier,i.x=e.touches[0].clientX,i.y=e.touches[0].clientY,i.activeElement=e.target,window.setTimeout(()=>{i.isPinching||i.isDragging||Date.now()-i.lastTouchendTime>=q&&(i.isDragging=!1,i.isPinching=!1,i.hypotenuse=null,i.isLongpressed=!0,c(i.activeElement,{name:"longpress",x:i.x,y:i.y}))},q)}},X=e=>{if(e.preventDefault(),e.stopPropagation(),i.isDragging){let t=i.x,s=i.y;i.x=e.touches[0].clientX,i.y=e.touches[0].clientY;let n=i.x-t,a=i.y-s;i.isLongpressed?c(i.activeElement,{name:"longpress-dragging",x:i.x,y:i.y,dx:n,dy:a}):c(i.activeElement,{name:"touch-dragging",x:i.x,y:i.y,dx:n,dy:a});return}else if(!i.isLongpressed&&(i.isPinching||e.touches.length>1)){i.x=e.touches[0].clientX,i.y=e.touches[0].clientY;let t={x:e.touches[1].clientX,y:e.touches[1].clientY},s={x:(i.x+t.x)/2,y:(i.y+t.y)/2},n=Math.hypot(i.x-t.x,i.y-t.y);i.hypotenuse===null&&(i.hypotenuse=n,i.lastCenterX=s.x,i.lastCenterY=s.y,c(i.activeElement,{name:"pinch-start",x:s.x,y:s.y})),i.isPinching=!0;let a=n/i.hypotenuse,r=s.x-i.lastCenterX,o=s.y-i.lastCenterY;c(i.activeElement,{name:"pinching",x:s.x,y:s.y,zoom:a,dx:r,dy:o}),i.hypotenuse=n,i.lastCenterX=s.x,i.lastCenterY=s.y;return}else i.isDragging=!0,i.isLongpressed?(c(i.activeElement,{name:"longpress-drag-start",x:i.x,y:i.y}),i.x=e.touches[0].clientX,i.y=e.touches[0].clientY,c(i.activeElement,{name:"longpress-dragging",x:i.x,y:i.y,dx:0,dy:0})):(c(i.activeElement,{name:"touch-drag-start",x:i.x,y:i.y}),i.x=e.touches[0].clientX,i.y=e.touches[0].clientY,c(i.activeElement,{name:"touch-dragging",x:i.x,y:i.y,dx:0,dy:0}))},x=e=>{i.isDragging&&e.touches.length>0&&e.touches[0].identifier===i.identifier||(i.lastTouchendTime=Date.now(),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",x),window.removeEventListener("touchcancel",x),i.isDragging?(i.isDragging=!1,i.isLongpressed?(i.isLongpressed=!1,c(i.activeElement,{name:"longpress-drag-end",x:i.x,y:i.y})):c(i.activeElement,{name:"touch-drag-end",x:i.x,y:i.y})):i.isPinching?(i.isPinching=!1,i.hypotenuse=null,c(i.activeElement,{name:"pinch-end",x:i.lastCenterX,y:i.lastCenterY})):i.isLongpressed||(i.consecutiveTaps===0&&c(i.activeElement,{name:"tap",x:i.x,y:i.y}),i.consecutiveTaps++,window.setTimeout(()=>{i.consecutiveTaps>1&&c(i.activeElement,{name:"double-tap",x:i.x,y:i.y}),i.consecutiveTaps=0},le)),i.isLongpressed&&c(i.activeElement,{name:"longpress-release",x:i.x,y:i.y}),i.isLongpressed=!1)};function pe(...e){for(let t of e)D.findIndex(s=>s===t)===-1&&(D.length==0&&(window.addEventListener("blur",ue),window.addEventListener("focus",ce)),D.push(t),t.addEventListener("touchstart",ge,{passive:!1}),t.addEventListener("mousedown",me,{passive:!1}),t.addEventListener("contextmenu",he,{passive:!1}),t.addEventListener("wheel",de,{passive:!1}))}let W=function(e,t,s,n){var a=s-e,r=n-t;return Math.sqrt(a*a+r*r)};class fe{constructor(t,s){u(this,"resizeObserver",new ResizeObserver(this.resize.bind(this)));u(this,"elm");u(this,"ctx");u(this,"dragHandler");u(this,"startHandler");u(this,"lastPoint");u(this,"height");u(this,"width");u(this,"dpi");u(this,"drawRadius");u(this,"lineWidth");u(this,"lineCap");u(this,"strokeStyle");u(this,"lineDash");s||(s={}),this.lastPoint={x:0,y:0},this.height=0,this.width=0,this.dpi=window.devicePixelRatio,this.elm=t,this.ctx=this.elm.getContext("2d"),this.drawRadius=s.drawRadius?s.drawRadius:10,this.lineWidth=s.lineWidth?s.lineWidth:5,this.lineCap=s.lineCap?s.lineCap:"round",this.strokeStyle=s.strokeStyle?s.strokeStyle:"#000000",this.lineDash=s.lineDash?s.lineDash:[],this.dragHandler=this.dragHandle.bind(this),this.startHandler=this.startHandle.bind(this),this.resizeObserver.observe(this.elm);var n=this;pe(n.elm),n.elm.addEventListener("gesture",a=>{switch(a.detail.name){case"left-click-drag-start":case"touch-drag-start":n.startHandle(a.detail.x,a.detail.y);break;case"left-click-dragging":case"touch-dragging":n.dragHandle(a.detail.x,a.detail.y);break}}),n.resize()}screenToCanvas(t,s){let n=this.elm.getBoundingClientRect();return{x:(t+n.left)*this.dpi,y:(s-n.top)*this.dpi}}startHandle(t,s){var n=this;n.ctx.resetTransform(),n.ctx.clearRect(0,0,n.width,n.height),n.ctx.lineWidth=n.lineWidth,n.ctx.lineCap=n.lineCap,n.ctx.strokeStyle=n.strokeStyle,n.ctx.setLineDash(n.lineDash),n.ctx.beginPath(),n.lastPoint=n.screenToCanvas(t,s),n.ctx.moveTo(n.lastPoint.x,n.lastPoint.y)}dragHandle(t,s){var n=this;let a=n.screenToCanvas(t,s);if(n.drawRadius>0){if(W(a.x,a.y,n.lastPoint.x,n.lastPoint.y)<=n.drawRadius)return;let h=Math.sqrt(a.x*a.x+a.y*a.y-2*a.x*n.lastPoint.x+n.lastPoint.x*n.lastPoint.x-2*a.y*n.lastPoint.y+n.lastPoint.y*n.lastPoint.y);if(a={x:a.x+n.drawRadius*((n.lastPoint.x-a.x)/h),y:a.y+n.drawRadius*((n.lastPoint.y-a.y)/h)},W(n.lastPoint.x,n.lastPoint.y,a.x,a.y)<=.1)return}var r=(n.lastPoint.x+a.x)/2,o=(n.lastPoint.y+a.y)/2;n.ctx.quadraticCurveTo(n.lastPoint.x,n.lastPoint.y,r,o),n.lastPoint=a,n.ctx.stroke()}resize(){var t=this;console.log("resizing"),t.ctx.resetTransform(),t.dpi=window.devicePixelRatio;let s=+getComputedStyle(t.elm).getPropertyValue("height").slice(0,-2),n=+getComputedStyle(t.elm).getPropertyValue("width").slice(0,-2);t.height=s*t.dpi,t.width=n*t.dpi,t.elm.setAttribute("height",t.height.toString()),t.elm.setAttribute("width",t.width.toString())}}function ve(e){let t;return{c(){t=y("canvas"),this.h()},l(s){t=_(s,"CANVAS",{class:!0}),b(t).forEach(g),this.h()},h(){p(t,"class","svelte-1cws0lw")},m(s,n){f(s,t,n),e[1](t)},p:E,i:E,o:E,d(s){s&&g(t),e[1](null)}}}function ye(e,t,s){let n;ee(()=>{new fe(n)});function a(r){te[r?"unshift":"push"](()=>{n=r,s(0,n)})}return[n,a]}class _e extends M{constructor(t){super(),S(this,t,ye,ve,H,{})}}function B(e,t,s){const n=e.slice();return n[5]=t[s],n[6]=t,n[7]=s,n}function we(e){let t,s;return{c(){t=y("div"),s=K("Invalid input type!")},l(n){t=_(n,"DIV",{});var a=b(t);s=j(a,"Invalid input type!"),a.forEach(g)},m(n,a){f(n,t,a),Q(t,s)},p:E,d(n){n&&g(t)}}}function Ee(e){let t,s,n;function a(){e[4].call(t,e[6],e[7])}return{c(){t=y("input"),this.h()},l(r){t=_(r,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){p(t,"id",e[7].toString()),p(t,"type","checkbox"),p(t,"class","svelte-1v66pu2")},m(r,o){f(r,t,o),t.checked=e[5].value,s||(n=[w(t,"change",a),w(t,"input",function(){L(e[5].onInput(!e[5].value))&&e[5].onInput(!e[5].value).apply(this,arguments)})],s=!0)},p(r,o){e=r,o&1&&(t.checked=e[5].value)},d(r){r&&g(t),s=!1,P(n)}}}function ke(e){let t,s,n;function a(){e[3].call(t,e[6],e[7])}return{c(){t=y("input"),this.h()},l(r){t=_(r,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){p(t,"id",e[7].toString()),p(t,"type","color"),p(t,"class","svelte-1v66pu2")},m(r,o){f(r,t,o),k(t,e[5].value),s||(n=[w(t,"input",a),w(t,"input",function(){L(e[5].onInput(e[5].value))&&e[5].onInput(e[5].value).apply(this,arguments)})],s=!0)},p(r,o){e=r,o&1&&k(t,e[5].value)},d(r){r&&g(t),s=!1,P(n)}}}function xe(e){let t,s,n;function a(){e[2].call(t,e[6],e[7])}return{c(){t=y("input"),this.h()},l(r){t=_(r,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){p(t,"id",e[7].toString()),p(t,"type","text"),p(t,"class","svelte-1v66pu2")},m(r,o){f(r,t,o),k(t,e[5].value),s||(n=[w(t,"input",a),w(t,"input",function(){L(e[5].onInput(e[5].value))&&e[5].onInput(e[5].value).apply(this,arguments)})],s=!0)},p(r,o){e=r,o&1&&t.value!==e[5].value&&k(t,e[5].value)},d(r){r&&g(t),s=!1,P(n)}}}function be(e){let t,s,n;function a(){e[1].call(t,e[6],e[7])}return{c(){t=y("input"),this.h()},l(r){t=_(r,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){p(t,"id",e[7].toString()),p(t,"type","number"),p(t,"class","svelte-1v66pu2")},m(r,o){f(r,t,o),k(t,e[5].value),s||(n=[w(t,"input",a),w(t,"input",function(){L(e[5].onInput(e[5].value))&&e[5].onInput(e[5].value).apply(this,arguments)})],s=!0)},p(r,o){e=r,o&1&&F(t.value)!==e[5].value&&k(t,e[5].value)},d(r){r&&g(t),s=!1,P(n)}}}function G(e){let t,s=e[5].title+"",n,a,r;function o(d,v){return d[5].type=="number"?be:d[5].type=="string"?xe:d[5].type=="color"?ke:d[5].type=="checkbox"?Ee:we}let h=o(e),m=h(e);return{c(){t=y("label"),n=K(s),a=T(),m.c(),r=R(),this.h()},l(d){t=_(d,"LABEL",{for:!0,class:!0});var v=b(t);n=j(v,s),v.forEach(g),a=I(d),m.l(d),r=R(),this.h()},h(){p(t,"for",e[7].toString()),p(t,"class","svelte-1v66pu2")},m(d,v){f(d,t,v),Q(t,n),f(d,a,v),m.m(d,v),f(d,r,v)},p(d,v){v&1&&s!==(s=d[5].title+"")&&ie(n,s),h===(h=o(d))&&m?m.p(d,v):(m.d(1),m=h(d),m&&(m.c(),m.m(r.parentNode,r)))},d(d){d&&g(t),d&&g(a),m.d(d),d&&g(r)}}}function Le(e){let t,s=e[0],n=[];for(let a=0;a<s.length;a+=1)n[a]=G(B(e,s,a));return{c(){t=y("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){t=_(a,"DIV",{class:!0});var r=b(t);for(let o=0;o<n.length;o+=1)n[o].l(r);r.forEach(g),this.h()},h(){p(t,"class","container svelte-1v66pu2")},m(a,r){f(a,t,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null)},p(a,[r]){if(r&1){s=a[0];let o;for(o=0;o<s.length;o+=1){const h=B(a,s,o);n[o]?n[o].p(h,r):(n[o]=G(h),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},i:E,o:E,d(a){a&&g(t),ne(n,a)}}}function Pe(e,t,s){let{props:n}=t;function a(m,d){m[d].value=F(this.value),s(0,n)}function r(m,d){m[d].value=this.value,s(0,n)}function o(m,d){m[d].value=this.value,s(0,n)}function h(m,d){m[d].value=this.checked,s(0,n)}return e.$$set=m=>{"props"in m&&s(0,n=m.props)},[n,a,r,o,h]}class Ye extends M{constructor(t){super(),S(this,t,Pe,Le,H,{props:0})}}function Ce(e){let t,s,n,a,r,o;return n=new Ye({props:{props:[{title:"size",type:"number",onInput:Xe,value:1},{title:"name",type:"string",onInput:De,value:"My name"},{title:"color",type:"color",onInput:Te,value:"#ff0000"},{title:"enabled",type:"checkbox",onInput:Ie}]}}),r=new _e({}),{c(){t=T(),s=y("div"),$(n.$$.fragment),a=T(),$(r.$$.fragment),this.h()},l(h){se("svelte-9tg5sj",document.head).forEach(g),t=I(h),s=_(h,"DIV",{class:!0});var d=b(s);z(n.$$.fragment,d),d.forEach(g),a=I(h),z(r.$$.fragment,h),this.h()},h(){document.title="Drawing",p(s,"class","inputs-container svelte-15q53u6")},m(h,m){f(h,t,m),f(h,s,m),A(n,s,null),f(h,a,m),A(r,h,m),o=!0},p:E,i(h){o||(N(n.$$.fragment,h),N(r.$$.fragment,h),o=!0)},o(h){O(n.$$.fragment,h),O(r.$$.fragment,h),o=!1},d(h){h&&g(t),h&&g(s),U(n),h&&g(a),U(r,h)}}}function Xe(e){console.log(e)}function De(e){console.log(e)}function Te(e){console.log(e)}function Ie(e){console.log(e)}class He extends M{constructor(t){super(),S(this,t,null,Ce,H,{})}}export{He as component};
