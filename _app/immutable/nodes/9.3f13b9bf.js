import{S as H,i as J,s as K,k,a as w,l as y,m as P,c as E,h,n as g,K as W,b as U,E as v,U as L,Q as $,I,T as Q,q as S,r as N,e as V,d as C,f as X,g as M,J as Y,v as Z,y as x,z as ee,A as te,B as se,u as z}from"../chunks/index.b8f8e0ce.js";import{e as j,b as A,d as le,c as re,s as ae}from"../chunks/authStore.d2222fe0.js";import{b as ie}from"../chunks/paths.390649ad.js";function G(o){let e,t;return{c(){e=k("p"),t=S("Failed to login!"),this.h()},l(s){e=y(s,"P",{class:!0});var l=P(e);t=N(l,"Failed to login!"),l.forEach(h),this.h()},h(){g(e,"class","error svelte-1irvgk")},m(s,l){U(s,e,l),v(e,t)},d(s){s&&h(e)}}}function ne(o){let e,t,s,l,i,n,c,r,u,p,_,T,m=o[2]&&G();return{c(){e=k("form"),t=k("img"),l=w(),i=k("input"),n=w(),c=k("input"),r=w(),m&&m.c(),u=w(),p=k("input"),this.h()},l(d){e=y(d,"FORM",{class:!0});var f=P(e);t=y(f,"IMG",{class:!0,src:!0,alt:!0}),l=E(f),i=y(f,"INPUT",{class:!0,type:!0,placeholder:!0}),n=E(f),c=y(f,"INPUT",{class:!0,type:!0,placeholder:!0}),r=E(f),m&&m.l(f),u=E(f),p=y(f,"INPUT",{type:!0,class:!0}),f.forEach(h),this.h()},h(){g(t,"class","logo svelte-1irvgk"),W(t.src,s=ie+"/images/pen.svg")||g(t,"src",s),g(t,"alt","logo"),g(i,"class","email svelte-1irvgk"),g(i,"type","email"),g(i,"placeholder","Email"),i.required=!0,g(c,"class","password svelte-1irvgk"),g(c,"type","password"),g(c,"placeholder","Password"),c.required=!0,g(p,"type","submit"),p.value="Login",g(p,"class","btn svelte-1irvgk"),g(e,"class","container svelte-1irvgk")},m(d,f){U(d,e,f),v(e,t),v(e,l),v(e,i),L(i,o[0]),v(e,n),v(e,c),L(c,o[1]),v(e,r),m&&m.m(e,null),v(e,u),v(e,p),_||(T=[$(i,"input",o[4]),$(c,"input",o[5]),$(e,"submit",o[3])],_=!0)},p(d,[f]){f&1&&i.value!==d[0]&&L(i,d[0]),f&2&&c.value!==d[1]&&L(c,d[1]),d[2]?m||(m=G(),m.c(),m.m(e,u)):m&&(m.d(1),m=null)},i:I,o:I,d(d){d&&h(e),m&&m.d(),_=!1,Q(T)}}}function ue(o,e,t){let s="",l="",i=!1;async function n(){try{t(2,i=!1),await j.login(s,l)}catch{console.log("Login failed!"),t(2,i=!0)}}function c(){s=this.value,t(0,s)}function r(){l=this.value,t(1,l)}return[s,l,i,n,c,r]}class oe extends H{constructor(e){super(),J(this,e,ue,ne,K,{})}}function ce(o){let e,t;return e=new oe({}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),t=!0},p:I,i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function fe(o){let e,t;return{c(){e=k("div"),t=S("Loading...")},l(s){e=y(s,"DIV",{});var l=P(e);t=N(l,"Loading..."),l.forEach(h)},m(s,l){U(s,e,l),v(e,t)},p:I,i:I,o:I,d(s){s&&h(e)}}}function pe(o){let e,t,s=o[0].email+"",l,i,n,c,r,u,p,_,T,m,d,f=o[1].text+"",q,F,O;return{c(){e=k("div"),t=S("Current User: "),l=S(s),i=w(),n=k("button"),c=S("Logout"),r=w(),u=k("form"),p=k("input"),_=w(),T=k("input"),m=w(),d=k("p"),q=S(f),this.h()},l(a){e=y(a,"DIV",{});var b=P(e);t=N(b,"Current User: "),l=N(b,s),b.forEach(h),i=E(a),n=y(a,"BUTTON",{});var R=P(n);c=N(R,"Logout"),R.forEach(h),r=E(a),u=y(a,"FORM",{});var D=P(u);p=y(D,"INPUT",{type:!0}),_=E(D),T=y(D,"INPUT",{type:!0}),D.forEach(h),m=E(a),d=y(a,"P",{});var B=P(d);q=N(B,f),B.forEach(h),this.h()},h(){g(p,"type","text"),g(T,"type","submit"),T.value="Save!"},m(a,b){U(a,e,b),v(e,t),v(e,l),U(a,i,b),U(a,n,b),v(n,c),U(a,r,b),U(a,u,b),v(u,p),L(p,o[2]),v(u,_),v(u,T),U(a,m,b),U(a,d,b),v(d,q),F||(O=[$(n,"click",j.logout),$(p,"input",o[5]),$(u,"submit",o[6])],F=!0)},p(a,b){b&1&&s!==(s=a[0].email+"")&&z(l,s),b&4&&p.value!==a[2]&&L(p,a[2]),b&2&&f!==(f=a[1].text+"")&&z(q,f)},i:I,o:I,d(a){a&&h(e),a&&h(i),a&&h(n),a&&h(r),a&&h(u),a&&h(m),a&&h(d),F=!1,Q(O)}}}function _e(o){let e,t,s,l;const i=[pe,fe,ce],n=[];function c(r,u){return r[3].currentUser?0:r[3].isLoading?1:2}return e=c(o),t=n[e]=i[e](o),{c(){t.c(),s=V()},l(r){t.l(r),s=V()},m(r,u){n[e].m(r,u),U(r,s,u),l=!0},p(r,[u]){let p=e;e=c(r),e===p?n[e].p(r,u):(Z(),C(n[p],1,1,()=>{n[p]=null}),X(),t=n[e],t?t.p(r,u):(t=n[e]=i[e](r),t.c()),M(t,1),t.m(s.parentNode,s))},i(r){l||(M(t),l=!0)},o(r){C(t),l=!1},d(r){n[e].d(r),r&&h(s)}}}function me(o,e,t){let s;Y(o,A,_=>t(3,s=_));let l,i,n="";async function c(){if(s.currentUser)try{const _=le(re,"users",s.currentUser.uid);await ae(_,i,{merge:!0}),console.log("Save successful!")}catch(_){console.log("There was an error saving data!",_)}}function r(_){A.update(T=>({...T,data:_})),c()}A.subscribe(_=>{_.currentUser&&t(0,l=_.currentUser),_.data&&t(1,i=_.data)});function u(){n=this.value,t(2,n)}return[l,i,n,s,r,u,()=>{r({text:n})}]}class be extends H{constructor(e){super(),J(this,e,me,_e,K,{})}}export{be as component};
