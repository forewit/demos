import{S as ne,i as ce,s as oe,k as D,T as z,a as M,l as A,m as p,U as O,h,c as j,n as t,L as W,b as ae,E as n,N as $,O as H,I as te,M as de,P as ie,o as ue,j as fe,w as le}from"../chunks/index.508fdf22.js";import{d as he,e as ve}from"../chunks/gestures.a2c2b0ad.js";function se(r,a,s){const u=r.slice();return u[34]=a[s],u[35]=a,u[36]=s,u}function re(r){let a,s,u,i,g,m,l,v,o,y,E;function B(){r[12].call(i,r[35],r[36])}function C(){return r[13](r[34])}return{c(){a=D("div"),s=D("div"),u=M(),i=D("input"),g=M(),m=D("div"),l=z("svg"),v=z("path"),this.h()},l(T){a=A(T,"DIV",{id:!0,class:!0});var d=p(a);s=A(d,"DIV",{class:!0}),p(s).forEach(h),u=j(d),i=A(d,"INPUT",{name:!0,type:!0,class:!0}),g=j(d),m=A(d,"DIV",{id:!0,class:!0});var L=p(m);l=O(L,"svg",{fill:!0,version:!0,xmlns:!0,viewBox:!0,class:!0});var V=p(l);v=O(V,"path",{"fill-rule":!0,d:!0}),p(v).forEach(h),V.forEach(h),L.forEach(h),d.forEach(h),this.h()},h(){t(s,"class","tab-divider svelte-tkdlp"),t(i,"name","title-input"),t(i,"type","text"),t(i,"class","svelte-tkdlp"),t(v,"fill-rule","evenodd"),t(v,"d","M21.002,26.588l10.357,10.604c1.039,1.072,1.715,1.083,2.773,0l2.078-2.128 c1.018-1.042,1.087-1.726,0-2.839L25.245,21L36.211,9.775c1.027-1.055,1.047-1.767,0-2.84l-2.078-2.127 c-1.078-1.104-1.744-1.053-2.773,0L21.002,15.412L10.645,4.809c-1.029-1.053-1.695-1.104-2.773,0L5.794,6.936 c-1.048,1.073-1.029,1.785,0,2.84L16.759,21L5.794,32.225c-1.087,1.113-1.029,1.797,0,2.839l2.077,2.128 c1.049,1.083,1.725,1.072,2.773,0L21.002,26.588z"),t(l,"fill","currentColor"),t(l,"version","1.1"),t(l,"xmlns","http://www.w3.org/2000/svg"),t(l,"viewBox","0 0 42 42"),t(l,"class","svelte-tkdlp"),t(m,"id","close-tab"),t(m,"class","tab-bar-btn svelte-tkdlp"),t(a,"id",o=r[34].id),t(a,"class","tab svelte-tkdlp"),W(a,"closing",r[4]),W(a,"active",r[34].id===r[1])},m(T,d){ae(T,a,d),n(a,s),n(a,u),n(a,i),$(i,r[34].title),n(a,g),n(a,m),n(m,l),n(l,v),y||(E=[H(i,"input",B),H(m,"click",C)],y=!0)},p(T,d){r=T,d[0]&1&&i.value!==r[34].title&&$(i,r[34].title),d[0]&1&&o!==(o=r[34].id)&&t(a,"id",o),d[0]&16&&W(a,"closing",r[4]),d[0]&3&&W(a,"active",r[34].id===r[1])},d(T){T&&h(a),y=!1,ie(E)}}}function pe(r){let a,s,u,i,g,m,l,v,o,y,E,B,C,T,d,L,V,S,q,X,P,I,G,N,J,K,R=r[0],b=[];for(let f=0;f<R.length;f+=1)b[f]=re(se(r,R,f));return{c(){a=D("div"),s=D("div"),u=D("div"),i=z("svg"),g=z("path"),m=M(),l=D("div");for(let f=0;f<b.length;f+=1)b[f].c();v=M(),o=D("div"),y=M(),E=D("div"),B=z("svg"),C=z("path"),T=M(),d=D("div"),L=z("svg"),V=z("path"),S=M(),q=D("div"),X=M(),P=D("div"),I=D("textarea"),G=M(),N=D("div"),this.h()},l(f){a=A(f,"DIV",{class:!0});var k=p(a);s=A(k,"DIV",{class:!0});var c=p(s);u=A(c,"DIV",{id:!0,class:!0});var U=p(u);i=O(U,"svg",{viewBox:!0,xmlns:!0,fill:!0,transform:!0,class:!0});var Q=p(i);g=O(Q,"path",{fill:!0,d:!0}),p(g).forEach(h),Q.forEach(h),U.forEach(h),m=j(c),l=A(c,"DIV",{id:!0,class:!0});var F=p(l);for(let x=0;x<b.length;x+=1)b[x].l(F);v=j(F),o=A(F,"DIV",{id:!0,class:!0}),p(o).forEach(h),F.forEach(h),y=j(c),E=A(c,"DIV",{id:!0,class:!0});var Y=p(E);B=O(Y,"svg",{viewBox:!0,xmlns:!0,transform:!0,class:!0});var Z=p(B);C=O(Z,"path",{fill:!0,d:!0}),p(C).forEach(h),Z.forEach(h),Y.forEach(h),T=j(c),d=A(c,"DIV",{id:!0,class:!0});var e=p(d);L=O(e,"svg",{fill:!0,version:!0,xmlns:!0,viewBox:!0,"xml:space":!0,class:!0});var _=p(L);V=O(_,"path",{d:!0}),p(V).forEach(h),_.forEach(h),e.forEach(h),c.forEach(h),S=j(k),q=A(k,"DIV",{class:!0}),p(q).forEach(h),X=j(k),P=A(k,"DIV",{class:!0});var w=p(P);I=A(w,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),p(I).forEach(h),w.forEach(h),G=j(k),N=A(k,"DIV",{class:!0}),p(N).forEach(h),k.forEach(h),this.h()},h(){t(g,"fill","currentColor"),t(g,"d","M8 1.25a2.101 2.101 0 00-1.785.996l.64.392-.642-.388-5.675 9.373-.006.01a2.065 2.065 0 00.751 2.832c.314.183.67.281 1.034.285h11.366a2.101 2.101 0 001.791-1.045 2.064 2.064 0 00-.006-2.072L9.788 2.25l-.003-.004A2.084 2.084 0 008 1.25z"),t(i,"viewBox","-3 -3 22 22"),t(i,"xmlns","http://www.w3.org/2000/svg"),t(i,"fill","none"),t(i,"transform","rotate(270)"),t(i,"class","svelte-tkdlp"),t(u,"id","back"),t(u,"class","tab-bar-btn svelte-tkdlp"),W(u,"hide",!r[5]),t(o,"id","placeholder"),t(o,"class","tab svelte-tkdlp"),t(l,"id","tabs"),t(l,"class","svelte-tkdlp"),t(C,"fill","currentColor"),t(C,"d","M8 1.25a2.101 2.101 0 00-1.785.996l.64.392-.642-.388-5.675 9.373-.006.01a2.065 2.065 0 00.751 2.832c.314.183.67.281 1.034.285h11.366a2.101 2.101 0 001.791-1.045 2.064 2.064 0 00-.006-2.072L9.788 2.25l-.003-.004A2.084 2.084 0 008 1.25z"),t(B,"viewBox","-3 -3 22 22"),t(B,"xmlns","http://www.w3.org/2000/svg"),t(B,"transform","rotate(90)"),t(B,"class","svelte-tkdlp"),t(E,"id","forward"),t(E,"class","tab-bar-btn svelte-tkdlp"),W(E,"hide",!r[5]),t(V,"d",`M39.5,22.5v-3c0-1.48-0.43-2-2-2h-13v-13c0-1.48-0.49-2-2-2h-3c-1.55,0-2,0.52-2,2v13h-14c-1.48,0-2,0.49-2,2v3\r
                c0,1.55,0.52,2,2,2h14v14c0,1.51,0.48,2,2,2h3c1.48,0,2-0.43,2-2v-14h13C39.01,24.5,39.5,24.02,39.5,22.5z`),t(L,"fill","currentColor"),t(L,"version","1.1"),t(L,"xmlns","http://www.w3.org/2000/svg"),t(L,"viewBox","0 0 42 42"),t(L,"xml:space","preserve"),t(L,"class","svelte-tkdlp"),t(d,"id","new-tab"),t(d,"class","tab-bar-btn svelte-tkdlp"),t(s,"class","tab-bar svelte-tkdlp"),W(s,"minimal",!r[5]),t(q,"class","toolbar svelte-tkdlp"),t(I,"spellcheck","false"),t(I,"name","editor"),t(I,"id","text"),t(I,"class","svelte-tkdlp"),t(P,"class","editor svelte-tkdlp"),t(N,"class","status-bar svelte-tkdlp"),t(a,"class","main-grid svelte-tkdlp")},m(f,k){ae(f,a,k),n(a,s),n(s,u),n(u,i),n(i,g),n(s,m),n(s,l);for(let c=0;c<b.length;c+=1)b[c]&&b[c].m(l,null);n(l,v),n(l,o),r[14](o),r[15](l),n(s,y),n(s,E),n(E,B),n(B,C),n(s,T),n(s,d),n(d,L),n(L,V),n(a,S),n(a,q),n(a,X),n(a,P),n(P,I),$(I,r[6].text),n(a,G),n(a,N),J||(K=[H(window,"resize",r[7]),H(u,"click",r[11]),H(E,"click",r[16]),H(d,"click",r[9]),H(I,"input",r[17])],J=!0)},p(f,k){if(k[0]&32&&W(u,"hide",!f[5]),k[0]&1043){R=f[0];let c;for(c=0;c<R.length;c+=1){const U=se(f,R,c);b[c]?b[c].p(U,k):(b[c]=re(U),b[c].c(),b[c].m(l,v))}for(;c<b.length;c+=1)b[c].d(1);b.length=R.length}k[0]&32&&W(E,"hide",!f[5]),k[0]&32&&W(s,"minimal",!f[5]),k[0]&64&&$(I,f[6].text)},i:te,o:te,d(f){f&&h(a),de(b,f),r[14](null),r[15](null),J=!1,ie(K)}}}function ge(r,a,s){let u,i=[],g=[],m=null,l,v,o,y=0,E=0,B=0,C=!1,T=!1,d=!1;const L=(e,_=300)=>{let w;return(...x)=>{clearTimeout(w),w=setTimeout(()=>{e.apply(this,x)},_)}},V=()=>{s(5,d=l.scrollWidth>l.clientWidth)},S=e=>{l.scrollBy({left:e,behavior:"smooth"})},q=()=>{let e=Date.now().toString();i.push({id:e,title:"Untitled",text:""}),g.push(e),s(0,i),I(e),setTimeout(()=>{s(2,l.scrollLeft=l.scrollWidth,l)},0)},X=e=>{let _=g.indexOf(e);if(s(0,i=i.filter(w=>w.id!=e)),g=g.filter(w=>w!=e),s(4,C=!0),B=l.children[_].clientWidth,l.style.setProperty("--max-width",`${B}px`),d){let w=o.cloneNode();w.classList.add("filler"),w.style.backgroundColor="transparent",w.style.pointerEvents="none",l.appendChild(w)}P(),m==e&&I(g[Math.min(_,g.length-1)]||null)},P=L(()=>{l.querySelectorAll(".filler").forEach(e=>{e.remove()}),s(4,C=!1),console.log("finished closing tabs")},700),I=e=>{m!=e&&((e==null||!g.includes(e))&&s(1,m=null),s(1,m=e))},G=e=>{T=!0,v=e.target,y=e.detail.x-v.getBoundingClientRect().x,v.insertAdjacentElement("afterend",o),l.insertAdjacentElement("afterend",v),v.classList.add("dragging"),v.style.setProperty("--max-width",`${o.clientWidth}px`),requestAnimationFrame(K)},N=e=>{E=e.detail.x,v.style.setProperty("--x",`${E-y}px`);let _=v.getBoundingClientRect().x+v.offsetWidth/2;for(let w=0;w<l.children.length;w++){let x=l.children[w];if(x===o)continue;let ee=x.getBoundingClientRect();if(!(_<ee.left||_>ee.right)){o.getBoundingClientRect().left>ee.left?x.insertAdjacentElement("beforebegin",o):x.insertAdjacentElement("afterend",o);break}}},J=()=>{T=!1,v.classList.remove("dragging"),o.insertAdjacentElement("afterend",v),o.remove(),g=[];for(let e=0;e<l.children.length;e++){let _=l.children[e];_.classList.contains("tab")&&g.push(_.id)}b()},K=()=>{T&&(E<l.offsetLeft&&s(2,l.scrollLeft-=2,l),E>l.offsetLeft+l.clientWidth&&s(2,l.scrollLeft+=2,l),requestAnimationFrame(K))},R=e=>{if(!e.classList.contains("tab"))return;e.children.namedItem("title-input").select()},b=()=>{he();for(let e=0;e<l.children.length;e++){let _=l.children[e];_.classList.contains("tab")&&(ve(_),_.addEventListener("gesture",f))}},f=e=>{switch(e.detail.name){case"left-click-drag-start":case"longpress-drag-start":G(e);break;case"left-click-dragging":case"longpress-dragging":N(e);break;case"left-click-drag-end":case"longpress-drag-end":J();break;case"left-click":case"tap":I(e.target.id);break;case"double-click":case"double-tap":R(e.target);break}};ue(()=>{o.remove()}),fe(()=>{V(),b()});const k=()=>S(-80);function c(e,_){e[_].title=this.value,s(0,i)}const U=e=>X(e.id);function Q(e){le[e?"unshift":"push"](()=>{o=e,s(3,o)})}function F(e){le[e?"unshift":"push"](()=>{l=e,s(2,l)})}const Y=()=>{S(80)};function Z(){u.text=this.value,s(6,u),s(0,i),s(1,m)}return r.$$.update=()=>{r.$$.dirty[0]&3&&s(6,u=i.find(e=>e.id==m)||{text:"NEW TAB"})},[i,m,l,o,C,d,u,V,S,q,X,k,c,U,Q,F,Y,Z]}class _e extends ne{constructor(a){super(),ce(this,a,ge,pe,oe,{},null,[-1,-1])}}export{_e as component};
