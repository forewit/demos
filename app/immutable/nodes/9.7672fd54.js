var we=Object.defineProperty;var be=(e,t,i)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var _=(e,t,i)=>(be(e,typeof t!="symbol"?t+"":t,i),i);import{S as j,i as J,s as Q,k as w,a as R,l as b,m as X,h as v,c as q,n as k,b as E,J as C,o as Le,w as te,R as xe,q as he,e as ne,r as me,E as ge,u as Ye,Q as pe,O as Y,T as B,P as U,N as D,y as ie,D as Ce,z as se,A as le,g as ae,d as oe,B as re}from"../chunks/index.513dcc03.js";const ce=500,Xe=300,ue=500,De=300;class Te{constructor(){_(this,"isMoving",!1);_(this,"isLongclick",!1);_(this,"button",0);_(this,"lastX",0);_(this,"lastY",0);_(this,"consecutiveClicks",0);_(this,"lastMouseupTime",0);_(this,"activeElement",null);this.reset()}reset(){this.isMoving=!1,this.isLongclick=!1,this.button=0,this.lastX=0,this.lastY=0,this.consecutiveClicks=0,this.lastMouseupTime=0,this.activeElement=null}}class Pe{constructor(){_(this,"isDragging",!1);_(this,"isPinching",!1);_(this,"isLongpressed",!1);_(this,"consecutiveTaps",0);_(this,"lastTouchendTime",0);_(this,"lastCenterX",0);_(this,"lastCenterY",0);_(this,"identifier",0);_(this,"x",0);_(this,"y",0);_(this,"hypotenuse",0);_(this,"activeElement",null);this.reset()}reset(){this.isDragging=!1,this.isPinching=!1,this.isLongpressed=!1,this.consecutiveTaps=0,this.lastTouchendTime=0,this.lastCenterX=0,this.lastCenterY=0,this.identifier=0,this.x=0,this.y=0,this.hypotenuse=0,this.activeElement=null}}let W=[],l=new Te,n=new Pe;const d=(e,t)=>{e!=null&&e.dispatchEvent(new CustomEvent("gesture",{detail:t,bubbles:!1,cancelable:!1}))},Ie=e=>{l.reset(),n.reset(),l.lastMouseupTime=Date.now(),window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",G),window.removeEventListener("touchmove",K),window.removeEventListener("touchend",T)},Me=e=>{if(window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",G),window.removeEventListener("touchmove",K),window.removeEventListener("touchend",T),l.isMoving)if(l.isMoving=!1,l.isLongclick)l.isLongclick=!1,d(l.activeElement,{name:"longclick-drag-end",x:l.lastX,y:l.lastY});else switch(l.button){case 0:d(l.activeElement,{name:"left-click-drag-end",x:l.lastX,y:l.lastY});break;case 1:d(l.activeElement,{name:"middle-click-drag-end",x:l.lastX,y:l.lastY});break;case 2:d(l.activeElement,{name:"right-click-drag-end",x:l.lastX,y:l.lastY});break}l.isLongclick&&d(l.activeElement,{name:"longclick-release",x:l.lastX,y:l.lastY}),l.reset(),n.isDragging&&(n.isDragging=!1,n.isLongpressed?(n.isLongpressed=!1,d(n.activeElement,{name:"longpress-drag-end",x:n.lastCenterX,y:n.lastCenterY})):d(n.activeElement,{name:"touch-drag-end",x:n.lastCenterX,y:n.lastCenterY})),n.isLongpressed&&d(n.activeElement,{name:"longpress-release",x:n.lastCenterX,y:n.lastCenterY}),n.reset()},Se=e=>{d(e.target,{name:"wheel",x:e.clientX,y:e.clientY,event:e}),e.preventDefault(),e.stopPropagation()},He=e=>{e.preventDefault(),e.stopPropagation()},Ae=e=>{document.activeElement!==e.target&&(window.addEventListener("mousemove",V),window.addEventListener("mouseup",G),l.activeElement=e.target,l.lastX=e.clientX,l.lastY=e.clientY,l.isMoving||(l.button=e.button),l.button===0&&window.setTimeout(()=>{Date.now()-l.lastMouseupTime>=ue&&!l.isMoving&&(l.isLongclick=!0,d(l.activeElement,{name:"longclick",x:e.clientX,y:e.clientY}))},ue),e.preventDefault(),e.stopPropagation())},V=e=>{if(e.movementX===0&&e.movementY===0)return;let t=e.clientX-l.lastX,i=e.clientY-l.lastY;if(!l.isMoving)if(l.isLongclick)d(l.activeElement,{name:"longclick-drag-start",x:e.clientX,y:e.clientY});else switch(l.button){case 0:d(l.activeElement,{name:"left-click-drag-start",x:e.clientX,y:e.clientY});break;case 1:d(l.activeElement,{name:"middle-click-drag-start",x:e.clientX,y:e.clientY});break;case 2:d(l.activeElement,{name:"right-click-drag-start",x:e.clientX,y:e.clientY});break}if(l.isMoving=!0,l.lastX=e.clientX,l.lastY=e.clientY,l.isLongclick)d(l.activeElement,{name:"longclick-dragging",x:e.clientX,y:e.clientY,dx:t,dy:i});else switch(l.button){case 0:d(l.activeElement,{name:"left-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:i});break;case 1:d(l.activeElement,{name:"middle-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:i});break;case 2:d(l.activeElement,{name:"right-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:i});break}},G=e=>{if(window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",G),l.lastMouseupTime=Date.now(),l.isMoving)if(l.isMoving=!1,l.isLongclick)l.isLongclick=!1,d(l.activeElement,{name:"longclick-drag-end",x:l.lastX,y:l.lastY});else switch(l.button){case 0:d(l.activeElement,{name:"left-click-drag-end",x:l.lastX,y:l.lastY});break;case 1:d(l.activeElement,{name:"middle-click-drag-end",x:l.lastX,y:l.lastY});break;case 2:d(l.activeElement,{name:"right-click-drag-end",x:l.lastX,y:l.lastY});break}else l.isLongclick||(e.button===2?d(l.activeElement,{name:"right-click",x:e.clientX,y:e.clientY}):e.button===1?d(l.activeElement,{name:"middle-click",x:e.clientX,y:e.clientY}):(l.consecutiveClicks===0&&d(l.activeElement,{name:"left-click",x:e.clientX,y:e.clientY}),l.consecutiveClicks++,window.setTimeout(()=>{l.consecutiveClicks>1&&d(l.activeElement,{name:"double-click",x:e.clientX,y:e.clientY}),l.consecutiveClicks=0},De)));l.isLongclick&&d(l.activeElement,{name:"longclick-release",x:e.clientX,y:e.clientY}),l.isLongclick=!1},Ne=e=>{if(e.touches.length>1&&(e.preventDefault(),e.stopPropagation()),document.activeElement!==e.target){if(e.preventDefault(),e.stopPropagation(),e.touches.length>1){if(e.touches[0].identifier===n.identifier)return;n.isPinching=!0}window.addEventListener("touchmove",K,{passive:!1}),window.addEventListener("touchend",T),window.addEventListener("touchcancel",T),n.identifier=e.touches[0].identifier,n.x=e.touches[0].clientX,n.y=e.touches[0].clientY,n.activeElement=e.target,window.setTimeout(()=>{n.isPinching||n.isDragging||Date.now()-n.lastTouchendTime>=ce&&(n.isDragging=!1,n.isPinching=!1,n.hypotenuse=null,n.isLongpressed=!0,d(n.activeElement,{name:"longpress",x:n.x,y:n.y}))},ce)}},K=e=>{if(e.preventDefault(),e.stopPropagation(),n.isDragging){let t=n.x,i=n.y;n.x=e.touches[0].clientX,n.y=e.touches[0].clientY;let s=n.x-t,o=n.y-i;n.isLongpressed?d(n.activeElement,{name:"longpress-dragging",x:n.x,y:n.y,dx:s,dy:o}):d(n.activeElement,{name:"touch-dragging",x:n.x,y:n.y,dx:s,dy:o});return}else if(!n.isLongpressed&&(n.isPinching||e.touches.length>1)){n.x=e.touches[0].clientX,n.y=e.touches[0].clientY;let t={x:e.touches[1].clientX,y:e.touches[1].clientY},i={x:(n.x+t.x)/2,y:(n.y+t.y)/2},s=Math.hypot(n.x-t.x,n.y-t.y);n.hypotenuse===null&&(n.hypotenuse=s,n.lastCenterX=i.x,n.lastCenterY=i.y,d(n.activeElement,{name:"pinch-start",x:i.x,y:i.y})),n.isPinching=!0;let o=s/n.hypotenuse,a=i.x-n.lastCenterX,c=i.y-n.lastCenterY;d(n.activeElement,{name:"pinching",x:i.x,y:i.y,zoom:o,dx:a,dy:c}),n.hypotenuse=s,n.lastCenterX=i.x,n.lastCenterY=i.y;return}else n.isDragging=!0,n.isLongpressed?(d(n.activeElement,{name:"longpress-drag-start",x:n.x,y:n.y}),n.x=e.touches[0].clientX,n.y=e.touches[0].clientY,d(n.activeElement,{name:"longpress-dragging",x:n.x,y:n.y,dx:0,dy:0})):(d(n.activeElement,{name:"touch-drag-start",x:n.x,y:n.y}),n.x=e.touches[0].clientX,n.y=e.touches[0].clientY,d(n.activeElement,{name:"touch-dragging",x:n.x,y:n.y,dx:0,dy:0}))},T=e=>{n.isDragging&&e.touches.length>0&&e.touches[0].identifier===n.identifier||(n.lastTouchendTime=Date.now(),window.removeEventListener("touchmove",K),window.removeEventListener("touchend",T),window.removeEventListener("touchcancel",T),n.isDragging?(n.isDragging=!1,n.isLongpressed?(n.isLongpressed=!1,d(n.activeElement,{name:"longpress-drag-end",x:n.x,y:n.y})):d(n.activeElement,{name:"touch-drag-end",x:n.x,y:n.y})):n.isPinching?(n.isPinching=!1,n.hypotenuse=null,d(n.activeElement,{name:"pinch-end",x:n.lastCenterX,y:n.lastCenterY})):n.isLongpressed||(n.consecutiveTaps===0&&d(n.activeElement,{name:"tap",x:n.x,y:n.y}),n.consecutiveTaps++,window.setTimeout(()=>{n.consecutiveTaps>1&&d(n.activeElement,{name:"double-tap",x:n.x,y:n.y}),n.consecutiveTaps=0},Xe)),n.isLongpressed&&d(n.activeElement,{name:"longpress-release",x:n.x,y:n.y}),n.isLongpressed=!1)};function ze(...e){for(let t of e)W.findIndex(i=>i===t)===-1&&(W.length==0&&(window.addEventListener("blur",Me),window.addEventListener("focus",Ie)),W.push(t),t.addEventListener("touchstart",Ne,{passive:!1}),t.addEventListener("mousedown",Ae,{passive:!1}),t.addEventListener("contextmenu",He,{passive:!1}),t.addEventListener("wheel",Se,{passive:!1}))}function Oe(e){let t,i,s;return{c(){t=w("canvas"),i=R(),s=w("canvas"),this.h()},l(o){t=b(o,"CANVAS",{id:!0,class:!0}),X(t).forEach(v),i=q(o),s=b(o,"CANVAS",{id:!0,class:!0}),X(s).forEach(v),this.h()},h(){k(t,"id","savedPaths"),k(t,"class","svelte-16hz5p5"),k(s,"id","canvas"),k(s,"class","svelte-16hz5p5")},m(o,a){E(o,t,a),e[7](t),E(o,i,a),E(o,s,a),e[8](s)},p:C,i:C,o:C,d(o){o&&v(t),e[7](null),o&&v(i),o&&v(s),e[8](null)}}}function Re(e,t,i){let s,{radius:o=10}=t,{stroke:a=5}=t,{lineCap:c="round"}=t,{color:u="#000000"}=t,{dashed:h=!1}=t,r,m,y={x:0,y:0},P=0,I=0,M,N=!1,z,S=[],x,L,F=function(f,g,p,O){var H=p-f,A=O-g;return Math.sqrt(H*H+A*A)};function ve(){console.log("resizing"),N&&$(),M=window.devicePixelRatio;let f=r.getBoundingClientRect();P=f.height*M,I=f.width*M,i(0,r.width=I,r),i(0,r.height=P,r),i(1,x.width=I,x),i(1,x.height=P,x);for(let g=0;g<S.length;g++)ee(S[g])}function Z(f,g){let p=r.getBoundingClientRect();return{x:(f-p.left)*M,y:(g-p.top)*M}}function ye(f,g){N=!0,z={points:[],stroke:a,lineCap:c,color:u,dash:s},m.clearRect(0,0,I,P),m.lineWidth=a,m.lineCap=c,m.strokeStyle=u,m.setLineDash(s),m.beginPath(),y=Z(f,g),m.moveTo(y.x,y.y),z.points.push(y)}function _e(f,g){if(!N)return;let p=Z(f,g);if(o>0){if(F(p.x,p.y,y.x,y.y)<=o)return;let A=Math.sqrt(p.x*p.x+p.y*p.y-2*p.x*y.x+y.x*y.x-2*p.y*y.y+y.y*y.y);if(p={x:p.x+o*((y.x-p.x)/A),y:p.y+o*((y.y-p.y)/A)},F(y.x,y.y,p.x,p.y)<=.1)return}var O=(y.x+p.x)/2,H=(y.y+p.y)/2;m.quadraticCurveTo(y.x,y.y,O,H),y=p,m.stroke(),z.points.push({x:O,y:H},p)}function $(){N=!1,m.clearRect(0,0,I,P),S.push(z),ee(S[S.length-1])}function ee(f){L.lineWidth=f.stroke,L.lineCap=f.lineCap,L.strokeStyle="#00ff00",L.setLineDash(f.dash),L.beginPath(),L.moveTo(f.points[0].x,f.points[0].y);for(let g=1;g<f.points.length;g=g+2)L.quadraticCurveTo(f.points[g-1].x,f.points[g-1].y,f.points[g].x,f.points[g].y),L.stroke()}Le(()=>{m=r.getContext("2d"),L=x.getContext("2d"),ze(r),r.addEventListener("gesture",g=>{switch(g.detail.name){case"left-click-drag-start":case"touch-drag-start":ye(g.detail.x,g.detail.y);break;case"left-click-dragging":case"touch-dragging":_e(g.detail.x,g.detail.y);break;case"left-click-drag-end":case"tough-drag-end":$();break}}),new ResizeObserver(ve).observe(r)});function ke(f){te[f?"unshift":"push"](()=>{x=f,i(1,x)})}function Ee(f){te[f?"unshift":"push"](()=>{r=f,i(0,r)})}return e.$$set=f=>{"radius"in f&&i(2,o=f.radius),"stroke"in f&&i(3,a=f.stroke),"lineCap"in f&&i(4,c=f.lineCap),"color"in f&&i(5,u=f.color),"dashed"in f&&i(6,h=f.dashed)},e.$$.update=()=>{e.$$.dirty&72&&(s=h?[a,a*3]:[])},[r,x,o,a,c,u,h,ke,Ee]}class qe extends j{constructor(t){super(),J(this,t,Re,Oe,Q,{radius:2,stroke:3,lineCap:4,color:5,dashed:6})}}function de(e,t,i){const s=e.slice();return s[5]=t[i],s[6]=t,s[7]=i,s}function Be(e){let t,i;return{c(){t=w("div"),i=he("Invalid input type!")},l(s){t=b(s,"DIV",{});var o=X(t);i=me(o,"Invalid input type!"),o.forEach(v)},m(s,o){E(s,t,o),ge(t,i)},p:C,d(s){s&&v(t)}}}function Ue(e){let t,i,s;function o(){e[4].call(t,e[6],e[7])}return{c(){t=w("input"),this.h()},l(a){t=b(a,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){k(t,"id",e[7].toString()),k(t,"type","checkbox"),k(t,"class","svelte-12frump")},m(a,c){E(a,t,c),t.checked=e[5].value,i||(s=[Y(t,"change",o),Y(t,"input",function(){B(e[5].onInput(!e[5].value))&&e[5].onInput(!e[5].value).apply(this,arguments)})],i=!0)},p(a,c){e=a,c&1&&(t.checked=e[5].value)},d(a){a&&v(t),i=!1,U(s)}}}function Ve(e){let t,i,s;function o(){e[3].call(t,e[6],e[7])}return{c(){t=w("input"),this.h()},l(a){t=b(a,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){k(t,"id",e[7].toString()),k(t,"type","color"),k(t,"class","svelte-12frump")},m(a,c){E(a,t,c),D(t,e[5].value),i||(s=[Y(t,"input",o),Y(t,"input",function(){B(e[5].onInput(e[5].value))&&e[5].onInput(e[5].value).apply(this,arguments)})],i=!0)},p(a,c){e=a,c&1&&D(t,e[5].value)},d(a){a&&v(t),i=!1,U(s)}}}function Ge(e){let t,i,s;function o(){e[2].call(t,e[6],e[7])}return{c(){t=w("input"),this.h()},l(a){t=b(a,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){k(t,"id",e[7].toString()),k(t,"type","text"),k(t,"class","svelte-12frump")},m(a,c){E(a,t,c),D(t,e[5].value),i||(s=[Y(t,"input",o),Y(t,"input",function(){B(e[5].onInput(e[5].value))&&e[5].onInput(e[5].value).apply(this,arguments)})],i=!0)},p(a,c){e=a,c&1&&t.value!==e[5].value&&D(t,e[5].value)},d(a){a&&v(t),i=!1,U(s)}}}function Ke(e){let t,i,s;function o(){e[1].call(t,e[6],e[7])}return{c(){t=w("input"),this.h()},l(a){t=b(a,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){k(t,"id",e[7].toString()),k(t,"type","number"),k(t,"class","svelte-12frump")},m(a,c){E(a,t,c),D(t,e[5].value),i||(s=[Y(t,"input",o),Y(t,"input",function(){B(e[5].onInput(e[5].value))&&e[5].onInput(e[5].value).apply(this,arguments)})],i=!0)},p(a,c){e=a,c&1&&pe(t.value)!==e[5].value&&D(t,e[5].value)},d(a){a&&v(t),i=!1,U(s)}}}function fe(e){let t,i=e[5].title+"",s,o,a;function c(r,m){return r[5].type=="number"?Ke:r[5].type=="string"?Ge:r[5].type=="color"?Ve:r[5].type=="checkbox"?Ue:Be}let u=c(e),h=u(e);return{c(){t=w("label"),s=he(i),o=R(),h.c(),a=ne(),this.h()},l(r){t=b(r,"LABEL",{for:!0,class:!0});var m=X(t);s=me(m,i),m.forEach(v),o=q(r),h.l(r),a=ne(),this.h()},h(){k(t,"for",e[7].toString()),k(t,"class","svelte-12frump")},m(r,m){E(r,t,m),ge(t,s),E(r,o,m),h.m(r,m),E(r,a,m)},p(r,m){m&1&&i!==(i=r[5].title+"")&&Ye(s,i),u===(u=c(r))&&h?h.p(r,m):(h.d(1),h=u(r),h&&(h.c(),h.m(a.parentNode,a)))},d(r){r&&v(t),r&&v(o),h.d(r),r&&v(a)}}}function We(e){let t,i=e[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=fe(de(e,i,o));return{c(){t=w("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=b(o,"DIV",{class:!0});var a=X(t);for(let c=0;c<s.length;c+=1)s[c].l(a);a.forEach(v),this.h()},h(){k(t,"class","container svelte-12frump")},m(o,a){E(o,t,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null)},p(o,[a]){if(a&1){i=o[0];let c;for(c=0;c<i.length;c+=1){const u=de(o,i,c);s[c]?s[c].p(u,a):(s[c]=fe(u),s[c].c(),s[c].m(t,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}},i:C,o:C,d(o){o&&v(t),xe(s,o)}}}function je(e,t,i){let{props:s}=t;function o(h,r){h[r].value=pe(this.value),i(0,s)}function a(h,r){h[r].value=this.value,i(0,s)}function c(h,r){h[r].value=this.value,i(0,s)}function u(h,r){h[r].value=this.checked,i(0,s)}return e.$$set=h=>{"props"in h&&i(0,s=h.props)},[s,o,a,c,u]}class Je extends j{constructor(t){super(),J(this,t,je,We,Q,{props:0})}}function Qe(e){let t,i,s,o,a,c;return s=new Je({props:{props:[{title:"Stroke",type:"number",onInput:e[3],value:e[0]},{title:"Color",type:"color",onInput:e[4],value:e[1]},{title:"Dashed",type:"checkbox",onInput:e[5],value:e[2]}]}}),a=new qe({props:{dashed:e[2],color:e[1],stroke:e[0]}}),{c(){t=R(),i=w("div"),ie(s.$$.fragment),o=R(),ie(a.$$.fragment),this.h()},l(u){Ce("svelte-94kuob",document.head).forEach(v),t=q(u),i=b(u,"DIV",{class:!0});var r=X(i);se(s.$$.fragment,r),r.forEach(v),o=q(u),se(a.$$.fragment,u),this.h()},h(){document.title="Draw",k(i,"class","inputs-container svelte-igcq23")},m(u,h){E(u,t,h),E(u,i,h),le(s,i,null),E(u,o,h),le(a,u,h),c=!0},p(u,[h]){const r={};h&7&&(r.props=[{title:"Stroke",type:"number",onInput:u[3],value:u[0]},{title:"Color",type:"color",onInput:u[4],value:u[1]},{title:"Dashed",type:"checkbox",onInput:u[5],value:u[2]}]),s.$set(r);const m={};h&4&&(m.dashed=u[2]),h&2&&(m.color=u[1]),h&1&&(m.stroke=u[0]),a.$set(m)},i(u){c||(ae(s.$$.fragment,u),ae(a.$$.fragment,u),c=!0)},o(u){oe(s.$$.fragment,u),oe(a.$$.fragment,u),c=!1},d(u){u&&v(t),u&&v(i),re(s),u&&v(o),re(a,u)}}}function Fe(e,t,i){let s=5,o="#ff0000",a=!1;return[s,o,a,r=>{r!=null&&i(0,s=r)},r=>{r!=null&&i(1,o=r)},r=>{r!=null&&i(2,a=r)}]}class tt extends j{constructor(t){super(),J(this,t,Fe,Qe,Q,{})}}export{tt as component};
