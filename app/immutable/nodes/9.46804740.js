import{S as F,i as J,s as X,k,a as R,q as G,l as I,m as S,h as d,c as B,r as K,n as p,b,E as W,I as E,o as ye,w as Q,L as te,K as ce,O as T,Q as j,e as V,M as ke,u as pe,N,R as L,P as z,y as ne,D as Ie,z as le,A as ie,g as se,d as ue,B as re}from"../chunks/index.508fdf22.js";import{e as Pe}from"../chunks/gestures.a2c2b0ad.js";import{b as _e}from"../chunks/paths.03611a53.js";function Te(t){let e,l,n,u;return{c(){e=k("canvas"),l=R(),n=k("div"),u=G("LOG"),this.h()},l(i){e=I(i,"CANVAS",{id:!0,class:!0}),S(e).forEach(d),l=B(i),n=I(i,"DIV",{class:!0});var s=S(n);u=K(s,"LOG"),s.forEach(d),this.h()},h(){p(e,"id","canvas"),p(e,"class","svelte-18vcmku"),p(n,"class","log svelte-18vcmku")},m(i,s){b(i,e,s),t[9](e),b(i,l,s),b(i,n,s),W(n,u),t[10](n)},p:E,i:E,o:E,d(i){i&&d(e),t[9](null),i&&d(l),i&&d(n),t[10](null)}}}function Ce(t,e,l){let n,{radius:u=3}=e,{smoothness:i=2}=e,{stroke:s=5}=e,{pressureScaler:o=5}=e,{color:r="#000000"}=e;function a(){c.clearRect(0,0,A,y),w=[]}function m(){if(w.length!=0){l(1,M.innerHTML="Undo",M),w.pop(),c.clearRect(0,0,A,y);for(let f=0;f<w.length;f++)$(w[f])}}let g,c,_={x:0,y:0},C=0,y=0,A=0,q,H=!1,M,D,w=[];const Y=(f,h,P,v)=>{var U=P-f,O=v-h;return Math.sqrt(U*U+O*O)},he=(f,h=300)=>{let P;return(...v)=>{clearTimeout(P),P=setTimeout(()=>{f.apply(void 0,v)},h)}};function Z(f,h){let P=g.getBoundingClientRect();return{x:(f-P.left)*q,y:(h-P.top)*q}}function de(){console.log("resizing"),x(),q=window.devicePixelRatio;let f=g.getBoundingClientRect();y=f.height*q,A=f.width*q,l(0,g.width=A,g),l(0,g.height=y,g);for(let h=0;h<w.length;h++)$(w[h])}function $(f){c.lineWidth=f.lineWidths[0],c.lineCap="round",c.strokeStyle=f.color,c.beginPath(),c.moveTo(f.points[0].x,f.points[0].y),c.stroke();for(let h=0;h<f.points.length;h++)c.lineWidth=f.lineWidths[h],c.quadraticCurveTo(f.points[h].x,f.points[h].y,f.ctrlPoints[h].x,f.ctrlPoints[h].y),c.stroke(),c.beginPath(),c.moveTo(f.ctrlPoints[h].x,f.ctrlPoints[h].y)}function me(f,h,P){H=!0,_=Z(f,h),P!==void 0&&P>0?C=Math.log(P+1)*o*n:C=n,c.lineWidth=C,c.lineCap="round",c.strokeStyle=r,c.beginPath(),c.moveTo(_.x,_.y),c.stroke(),D={points:[],ctrlPoints:[],lineWidths:[],color:r}}function ge(f,h,P){if(!H)return;let v=Z(f,h);if(u>0){if(Y(v.x,v.y,_.x,_.y)<=u)return;let ee=Math.sqrt(v.x*v.x+v.y*v.y-2*v.x*_.x+_.x*_.x-2*v.y*_.y+_.y*_.y);if(v={x:v.x+u*((_.x-v.x)/ee),y:v.y+u*((_.y-v.y)/ee)},Y(_.x,_.y,v.x,v.y)<=i)return}let U=(_.x+v.x)/2,O=(_.y+v.y)/2;P!==void 0&&P>0&&(C=Math.log(P+1)*o*n*.2+C*.8),c.lineWidth=C,c.quadraticCurveTo(_.x,_.y,U,O),c.stroke(),c.beginPath(),c.moveTo(U,O),D.points.push(_),D.ctrlPoints.push({x:U,y:O}),D.lineWidths.push(C),_=v}function x(){H&&w.push(D),H=!1}ye(()=>{c=g.getContext("2d"),c.imageSmoothingEnabled=!1,Pe(g),g.addEventListener("gesture",h=>{switch(h.detail.name){case"left-click-drag-start":case"touch-drag-start":me(h.detail.x,h.detail.y,h.detail.force);break;case"left-click-dragging":case"touch-dragging":h.detail.force>0&&l(1,M.innerHTML=h.detail.force,M),ge(h.detail.x,h.detail.y,h.detail.force);break;case"left-click-drag-end":case"touch-drag-end":x();break}}),new ResizeObserver(he(de,0)).observe(g)});function ve(f){Q[f?"unshift":"push"](()=>{g=f,l(0,g)})}function be(f){Q[f?"unshift":"push"](()=>{M=f,l(1,M)})}return t.$$set=f=>{"radius"in f&&l(2,u=f.radius),"smoothness"in f&&l(3,i=f.smoothness),"stroke"in f&&l(4,s=f.stroke),"pressureScaler"in f&&l(5,o=f.pressureScaler),"color"in f&&l(6,r=f.color)},t.$$.update=()=>{t.$$.dirty&16&&(n=Math.max(s,1))},[g,M,u,i,s,o,r,a,m,ve,be]}class Se extends F{constructor(e){super(),J(this,e,Ce,Te,X,{radius:2,smoothness:3,stroke:4,pressureScaler:5,color:6,clear:7,undo:8})}get clear(){return this.$$.ctx[7]}get undo(){return this.$$.ctx[8]}}function oe(t,e,l){const n=t.slice();return n[9]=e[l],n[10]=e,n[11]=l,n}function ae(t){let e,l,n,u,i;return{c(){e=k("button"),l=k("img"),this.h()},l(s){e=I(s,"BUTTON",{class:!0});var o=S(e);l=I(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(d),this.h()},h(){ce(l.src,n=_e+"/images/close-icon.svg")||p(l,"src",n),p(l,"alt",""),p(l,"class","svelte-l4ogrk"),p(e,"class","close-btn svelte-l4ogrk")},m(s,o){b(s,e,o),W(e,l),u||(i=T(e,"click",t[2]),u=!0)},p:E,d(s){s&&d(e),u=!1,i()}}}function we(t){let e,l,n,u,i;return{c(){e=k("button"),l=k("img"),this.h()},l(s){e=I(s,"BUTTON",{class:!0});var o=S(e);l=I(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(d),this.h()},h(){ce(l.src,n=_e+"/images/settings-icon.svg")||p(l,"src",n),p(l,"alt","Open"),p(l,"class","svelte-l4ogrk"),p(e,"class","open-btn svelte-l4ogrk")},m(s,o){b(s,e,o),W(e,l),u||(i=T(e,"click",t[8]),u=!0)},p:E,d(s){s&&d(e),u=!1,i()}}}function Ee(t){let e,l=t[0],n=[];for(let u=0;u<l.length;u+=1)n[u]=fe(oe(t,l,u));return{c(){for(let u=0;u<n.length;u+=1)n[u].c();e=V()},l(u){for(let i=0;i<n.length;i+=1)n[i].l(u);e=V()},m(u,i){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(u,i);b(u,e,i)},p(u,i){if(i&1){l=u[0];let s;for(s=0;s<l.length;s+=1){const o=oe(u,l,s);n[s]?n[s].p(o,i):(n[s]=fe(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(u){ke(n,u),u&&d(e)}}}function Ne(t){let e,l;return{c(){e=k("div"),l=G("Invalid input type!")},l(n){e=I(n,"DIV",{});var u=S(e);l=K(u,"Invalid input type!"),u.forEach(d)},m(n,u){b(n,e,u),W(e,l)},p:E,d(n){n&&d(e)}}}function Me(t){let e,l,n,u,i,s;function o(){t[7].call(e,t[10],t[11])}return{c(){e=k("input"),this.h()},l(r){e=I(r,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),this.h()},h(){p(e,"id",t[11].toString()),p(e,"type","range"),p(e,"min",l=t[9].min||0),p(e,"max",n=t[9].max||100),p(e,"step",u=t[9].step||1)},m(r,a){b(r,e,a),N(e,t[9].value),i||(s=[T(e,"change",o),T(e,"input",o),T(e,"input",function(){L(t[9].onInput(t[9].value||t[9].min||0))&&t[9].onInput(t[9].value||t[9].min||0).apply(this,arguments)})],i=!0)},p(r,a){t=r,a&1&&l!==(l=t[9].min||0)&&p(e,"min",l),a&1&&n!==(n=t[9].max||100)&&p(e,"max",n),a&1&&u!==(u=t[9].step||1)&&p(e,"step",u),a&1&&N(e,t[9].value)},d(r){r&&d(e),i=!1,z(s)}}}function Ue(t){let e,l=t[9].label+"",n,u,i;return{c(){e=k("button"),n=G(l),this.h()},l(s){e=I(s,"BUTTON",{class:!0,id:!0});var o=S(e);n=K(o,l),o.forEach(d),this.h()},h(){p(e,"class","btn svelte-l4ogrk"),p(e,"id",t[11].toString())},m(s,o){b(s,e,o),W(e,n),u||(i=T(e,"click",function(){L(t[9].onClick())&&t[9].onClick().apply(this,arguments)}),u=!0)},p(s,o){t=s,o&1&&l!==(l=t[9].label+"")&&pe(n,l)},d(s){s&&d(e),u=!1,i()}}}function Oe(t){let e,l,n;function u(){t[6].call(e,t[10],t[11])}return{c(){e=k("input"),this.h()},l(i){e=I(i,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){p(e,"class","input svelte-l4ogrk"),p(e,"id",t[11].toString()),p(e,"type","checkbox")},m(i,s){b(i,e,s),e.checked=t[9].value,l||(n=[T(e,"change",u),T(e,"input",function(){L(t[9].onInput(!t[9].value))&&t[9].onInput(!t[9].value).apply(this,arguments)})],l=!0)},p(i,s){t=i,s&1&&(e.checked=t[9].value)},d(i){i&&d(e),l=!1,z(n)}}}function We(t){let e,l,n;function u(){t[5].call(e,t[10],t[11])}return{c(){e=k("input"),this.h()},l(i){e=I(i,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){p(e,"class","input svelte-l4ogrk"),p(e,"id",t[11].toString()),p(e,"type","color")},m(i,s){b(i,e,s),N(e,t[9].value),l||(n=[T(e,"input",u),T(e,"input",function(){L(t[9].onInput(t[9].value||"#000000"))&&t[9].onInput(t[9].value||"#000000").apply(this,arguments)})],l=!0)},p(i,s){t=i,s&1&&N(e,t[9].value)},d(i){i&&d(e),l=!1,z(n)}}}function Le(t){let e,l,n;function u(){t[4].call(e,t[10],t[11])}return{c(){e=k("input"),this.h()},l(i){e=I(i,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){p(e,"class","input svelte-l4ogrk"),p(e,"id",t[11].toString()),p(e,"type","text")},m(i,s){b(i,e,s),N(e,t[9].value),l||(n=[T(e,"input",u),T(e,"input",function(){L(t[9].onInput(t[9].value||""))&&t[9].onInput(t[9].value||"").apply(this,arguments)})],l=!0)},p(i,s){t=i,s&1&&e.value!==t[9].value&&N(e,t[9].value)},d(i){i&&d(e),l=!1,z(n)}}}function qe(t){let e,l,n;function u(){t[3].call(e,t[10],t[11])}return{c(){e=k("input"),this.h()},l(i){e=I(i,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){p(e,"class","input svelte-l4ogrk"),p(e,"id",t[11].toString()),p(e,"type","number")},m(i,s){b(i,e,s),N(e,t[9].value),l||(n=[T(e,"input",u),T(e,"input",function(){L(t[9].onInput(t[9].value||0))&&t[9].onInput(t[9].value||0).apply(this,arguments)})],l=!0)},p(i,s){t=i,s&1&&j(e.value)!==t[9].value&&N(e,t[9].value)},d(i){i&&d(e),l=!1,z(n)}}}function fe(t){let e,l=t[9].title+"",n,u,i;function s(a,m){return a[9].type=="number"?qe:a[9].type=="text"?Le:a[9].type=="color"?We:a[9].type=="checkbox"?Oe:a[9].type=="button"?Ue:a[9].type=="slider"?Me:Ne}let o=s(t),r=o(t);return{c(){e=k("label"),n=G(l),u=R(),r.c(),i=V(),this.h()},l(a){e=I(a,"LABEL",{class:!0,for:!0});var m=S(e);n=K(m,l),m.forEach(d),u=B(a),r.l(a),i=V(),this.h()},h(){p(e,"class","label svelte-l4ogrk"),p(e,"for",t[11].toString())},m(a,m){b(a,e,m),W(e,n),b(a,u,m),r.m(a,m),b(a,i,m)},p(a,m){m&1&&l!==(l=a[9].title+"")&&pe(n,l),o===(o=s(a))&&r?r.p(a,m):(r.d(1),r=o(a),r&&(r.c(),r.m(i.parentNode,i)))},d(a){a&&d(e),a&&d(u),r.d(a),a&&d(i)}}}function De(t){let e,l,n=t[1]&&ae(t);function u(o,r){return o[1]?Ee:we}let i=u(t),s=i(t);return{c(){n&&n.c(),e=R(),l=k("div"),s.c(),this.h()},l(o){n&&n.l(o),e=B(o),l=I(o,"DIV",{class:!0});var r=S(l);s.l(r),r.forEach(d),this.h()},h(){p(l,"class","container glass svelte-l4ogrk"),te(l,"closed",!t[1])},m(o,r){n&&n.m(o,r),b(o,e,r),b(o,l,r),s.m(l,null)},p(o,[r]){o[1]?n?n.p(o,r):(n=ae(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i===(i=u(o))&&s?s.p(o,r):(s.d(1),s=i(o),s&&(s.c(),s.m(l,null))),r&2&&te(l,"closed",!o[1])},i:E,o:E,d(o){n&&n.d(o),o&&d(e),o&&d(l),s.d()}}}function Re(t,e,l){let{props:n}=e,u=!1;const i=()=>l(1,u=!1);function s(c,_){c[_].value=j(this.value),l(0,n)}function o(c,_){c[_].value=this.value,l(0,n)}function r(c,_){c[_].value=this.value,l(0,n)}function a(c,_){c[_].value=this.checked,l(0,n)}function m(c,_){c[_].value=j(this.value),l(0,n)}const g=()=>{l(1,u=!0)};return t.$$set=c=>{"props"in c&&l(0,n=c.props)},[n,u,i,s,o,r,a,m,g]}class Be extends F{constructor(e){super(),J(this,e,Re,De,X,{props:0})}}function ze(t){let e,l,n,u,i,s;n=new Be({props:{props:[{title:"Stroke",type:"slider",max:50,onInput:t[5],value:t[1]},{title:"Radius",type:"slider",max:50,onInput:t[6],value:t[2]},{title:"Smoothness",type:"slider",max:50,onInput:t[7],value:t[3]},{title:"Color",type:"color",onInput:t[8],value:t[4]},{title:"Clear",type:"button",onClick:t[9],label:"🧹"},{title:"Undo",type:"button",onClick:t[10],label:"🔙"}]}});let o={color:t[4],stroke:t[1],radius:t[2],smoothness:t[3]};return i=new Se({props:o}),t[11](i),{c(){e=R(),l=k("div"),ne(n.$$.fragment),u=R(),ne(i.$$.fragment),this.h()},l(r){Ie("svelte-94kuob",document.head).forEach(d),e=B(r),l=I(r,"DIV",{class:!0});var m=S(l);le(n.$$.fragment,m),m.forEach(d),u=B(r),le(i.$$.fragment,r),this.h()},h(){document.title="Draw",p(l,"class","inputs-container svelte-igcq23")},m(r,a){b(r,e,a),b(r,l,a),ie(n,l,null),b(r,u,a),ie(i,r,a),s=!0},p(r,[a]){const m={};a&31&&(m.props=[{title:"Stroke",type:"slider",max:50,onInput:r[5],value:r[1]},{title:"Radius",type:"slider",max:50,onInput:r[6],value:r[2]},{title:"Smoothness",type:"slider",max:50,onInput:r[7],value:r[3]},{title:"Color",type:"color",onInput:r[8],value:r[4]},{title:"Clear",type:"button",onClick:r[9],label:"🧹"},{title:"Undo",type:"button",onClick:r[10],label:"🔙"}]),n.$set(m);const g={};a&16&&(g.color=r[4]),a&2&&(g.stroke=r[1]),a&4&&(g.radius=r[2]),a&8&&(g.smoothness=r[3]),i.$set(g)},i(r){s||(se(n.$$.fragment,r),se(i.$$.fragment,r),s=!0)},o(r){ue(n.$$.fragment,r),ue(i.$$.fragment,r),s=!1},d(r){r&&d(e),r&&d(l),re(n),r&&d(u),t[11](null),re(i,r)}}}function Ae(t,e,l){let n,u=10,i=3,s=2,o="#429A53";const r=y=>{y!=null&&l(1,u=y)},a=y=>{y!=null&&l(2,i=y)},m=y=>{y!=null&&l(3,s=y)},g=y=>{y!=null&&l(4,o=y)},c=()=>{n.clear()},_=()=>{n.undo()};function C(y){Q[y?"unshift":"push"](()=>{n=y,l(0,n)})}return[n,u,i,s,o,r,a,m,g,c,_,C]}class Qe extends F{constructor(e){super(),J(this,e,Ae,ze,X,{})}}export{Qe as component};
